<div class=" page-layout blank">
  <ngx-spinner bdColor="rgba(51, 51, 51, 0.8)" size="medium" color="#fff" type="line-scale-pulse-out"></ngx-spinner>
  <div class="content p-24">
    <div fxLayout="row" *ngIf="allServiceList.length != 0" fxLayoutAlign="space-between center" fxLayout.gt-xs="row"
      fxLayoutAlign.gt-xs="space-between center">

      <mat-button-toggle-group name="expand-collapse" aria-label="expand-collapse">
        <mat-button-toggle (click)="allExpandState = true">
          <mat-icon [inline]='true'>unfold_more</mat-icon>
        </mat-button-toggle>
        <mat-button-toggle (click)="allExpandState = false">
          <mat-icon [inline]='true'>unfold_less</mat-icon>
        </mat-button-toggle>
      </mat-button-toggle-group>

      <!-- <mat-form-field class="noline">
        <mat-select placeholder="Export">
          <mat-option *ngFor="let type of export" [value]="type.value">{{type.viewValue}}</mat-option>
        </mat-select>
      </mat-form-field> -->
      <div class="">
        <button mat-button [matMenuTriggerFor]="menu" [disabled]="!allServiceList.length">{{'Export' | translate}}</button>
        <mat-menu #menu="matMenu">
          <button mat-menu-item value="CSV"
          (click)="onOptionSelected($event.currentTarget.value)">{{'CSV'| translate}}</button>
          <button mat-menu-item value="Excel"
          (click)="onOptionSelected($event.currentTarget.value)">{{'Excel' | translate}}</button>
          <button mat-menu-item value="Pdf"
          (click)="onOptionSelected($event.currentTarget.value)">{{'Pdf' | translate}}</button>
        </mat-menu>
        </div> 

    </div>
    <!-- </div> -->
  </div>
  <p-toast [style]="{marginTop: '70px'}"></p-toast>
  <!-- <button (click)="toast()">Click me</button> -->
  <div *ngIf="false" fxLayout="column" fxLayoutAlign="space-around stretch">
    <table mat-table [dataSource]="allServiceList" class="mat-elevation-z8">
      <ng-container matColumnDef="serviceType">
        <th mat-header-cell *matHeaderCellDef> {{'Service Name' | translate}}</th>
        <td mat-cell *matCellDef="let element"> {{element.serviceType}} </td>
      </ng-container>
      <ng-container matColumnDef="name">
        <th mat-header-cell *matHeaderCellDef>{{'Service Name' | translate}} </th>
        <td mat-cell *matCellDef="let element"> {{element.name}} </td>
      </ng-container>
      <ng-container matColumnDef="description">
        <th mat-header-cell *matHeaderCellDef> {{'Description' | translate}} </th>
        <td mat-cell *matCellDef="let element"> {{element.description}} </td>
      </ng-container>
      <tr mat-header-row *matHeaderRowDef="allServiceColumns"></tr>
      <tr mat-row *matRowDef="let row; columns: allServiceColumns;" (click)="serviceSelect(row)"></tr>
    </table>
    <div class="text-center py-3 p-4" *ngIf="allServiceList.length == 0">
      <div class="emptyicons">
        <mat-icon [inline]='true'>view_agenda
        </mat-icon>
        <h1>{{'No Services' | translate}}</h1>
        <p>{{'Make some services for data to appear' | translate}}</p>
      </div>
    </div>
  </div>
  <!-- xx xx xx xx xx xx xx xx xx xx xx xxx xxx xxx xx xx xx xx xx -->
  <div *ngIf="allServiceList.length != 0">
    <mat-accordion multi="true" cdkDropList (cdkDropListDropped)="drop($event, allServiceList)">
      <mat-expansion-panel class="panel-header" cdkDrag *ngFor="let item of allServiceList" [expanded]="allExpandState"
        style="margin: 20px;">
        <mat-expansion-panel-header>
          <mat-panel-title>
            <div class="group-head">
              <mat-icon [inline]='true'>view_headline</mat-icon>{{item.name}}
            </div>
          </mat-panel-title>
          <button (click)="$event.stopPropagation();" mat-button [matMenuTriggerFor]="menu">
            <mat-icon>more_horiz</mat-icon>
          </button>
          <mat-menu #menu="matMenu">
            <button mat-menu-item (click)="addNewService(item)">{{'Add New Service' | translate}}</button>
            <button mat-menu-item (click)="editGroupModel(item)">{{'Edit Group' | translate}}</button>
            <button mat-menu-item (click)="deleteGoup(item)">{{'Delete Group' | translate}}</button>
          </mat-menu>
        </mat-expansion-panel-header>
        <!-- xxxx -->
        <div class="mat-table" cdkDropList (cdkDropListDropped)="drop($event, item.services)">
          <div style="border-bottom: 1px solid #A3A3A3;" cdkDrag cdkDragLockAxis="y" *ngFor="let data of item.services"
            (click)="serviceSelect(data,item)">
            <div class="mat-row">
              <div class="mat-cell serviceName">
                <mat-icon [inline]='true'>view_headline</mat-icon>{{data.name}}
              </div>
            </div>
            <div class="mat-row" *ngFor="let price of data.pricing_option">
              <div class="mat-cell name">{{ price?.specialPriceFor}}</div>
              <div class="mat-cell duration">{{ price?.duration}}</div>
              <div class="mat-cell specialPrice">{{ price.specialPrice ? (price.price |
                currency:currencyCode : 'symbol-narrow') : ""}}</div>
              <div class="mat-cell price">{{ price.specialPrice ? (price.specialPrice |
                currency:currencyCode : 'symbol-narrow') :
                price.price}}</div>
            </div>
          </div>
        </div>
        <!-- xxxx -->
      </mat-expansion-panel>
    </mat-accordion>
  </div>
  <div class="text-center py-3 p-4" *ngIf="allServiceList.length == 0">
    <div class="emptyicons">
      <mat-icon [inline]='true'>assignment
      </mat-icon>
      <h1>{{'No Services Set Up' | translate}}</h1>
      <div class="service-des-box">
        <p class="service-des">{{'You do not have any services yet' | translate}}, {{'create your first group to start filling up your
          services menu' | translate}}</p>
      </div>
      <button mat-raised-button (click)="openGroupModel()" class="new-service-group">{{'New Service Group' | translate}}</button>
    </div>
  </div>
  <div class="button centered-x" *ngIf="allServiceList.length != 0">
    <input type="checkbox" id="your-id" class="button-checkbox">
    <label class="button-trigger" for="your-id"> <i class="material-icons">add</i> </label>
    <div class="button-option" (click)="openGroupModel()"><a tooltip="New Service Group">
        <i class="material-icons">group_work</i>
      </a>
    </div>
    <div class="button-option" (click)="groupModelList()">
      <a tooltip="New Service">
        <i class="material-icons">calendar_today</i>
      </a>
    </div>
  </div>
</div>