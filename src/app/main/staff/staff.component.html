<div class="page-layout blank">
  <ngx-spinner bdColor="rgba(51, 51, 51, 0.8)" size="medium" color="#fff" type="line-scale-pulse-out"></ngx-spinner>
  <mat-tab-group (selectedTabChange)="onTabChange($event)">
    <mat-tab label="{{'WORKING HOURS' | translate}}">
      <p-toast [style]="{marginTop: '50px'}"></p-toast>
      <div fxLayout="row" fxLayoutAlign="space-around center" fxLayoutGap="5px" fxLayoutGap.xs="1" fxLayout.xs="column">
        <div fxLayout="column" fxFlex="25">
          <mat-form-field class="noline" *ngIf="locList?.length != 1">
            <mat-select class="dropdown" [(ngModel)]="selectedLoc"
              (selectionChange)="locSelectedListener($event.value)">
              <mat-option *ngFor="let item of locList" [value]="item._id">
                {{item.name}}
              </mat-option>
            </mat-select>
          </mat-form-field>
        </div>
        <div *ngIf="staff.length != 0" fxLayout="column" fxFlex="20" fxFlex.xs="100">
          <mat-form-field class="noline">
            <mat-select class="dropdown" [(ngModel)]="selectedStaff"
              (selectionChange)="StaffSelectedListener($event.value)">
              <mat-option value="">{{'All Staff' | translate}}</mat-option>
              <mat-option *ngFor="let item of staff" [value]="item._id">
                {{item.firstName}} {{item.lastName}}
              </mat-option>
            </mat-select>
          </mat-form-field>
        </div>
        <div fxLayout="column" fxFlex="50">
          <div fxLayout="row" fxLayoutAlign="end center" fxFlex.xs="100">
            <mat-form-field class="staffDate">
              <input matInput autocomplete="off" [matDatepicker]="picker" (dateChange)="onDate($event)"
                placeholder="{{'Choose a date' | translate }}">
              <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
              <mat-datepicker  #picker ngDefaultControl></mat-datepicker>
            </mat-form-field>
          </div>
        </div>
      </div>
      <div class="filters" fxLayout="column" fxLayoutAlign="start stretch">
        <div class="mat-tables">
          <div class="mat-header-rows">
            <div class="mat-header-cells">{{'Staff' | translate}}</div>
            <div class="mat-header-cells"> {{Sun_date | date:'EE, MMM d, y'}}</div>
            <div class="mat-header-cells"> {{Mon_date | date:'EE, MMM d, y'}}</div>
            <div class="mat-header-cells"> {{Tue_date | date:'EE, MMM d, y'}}</div>
            <div class="mat-header-cells"> {{Wed_date | date:'EE, MMM d, y'}}</div>
            <div class="mat-header-cells"> {{Thu_date | date:'EE, MMM d, y'}}</div>
            <div class="mat-header-cells"> {{Fri_date | date:'EE, MMM d, y'}}</div>
            <div class="mat-header-cells"> {{Sat_date | date:'EE, MMM d, y'}}</div>
          </div>

          <ng-container *ngIf="work.length != 0">
            <div class="card" *ngFor="let data of work">
              <div *ngIf="data.staff && data.staff._id"
                [ngClass]="(id == data.staff._id || type == 'owner') ? 'cur' : 'cur2'">
                <mat-grid-list cols="8" rowHeight="2:1" gutterSize="3px">
                  <mat-grid-tile class="makeBorder">
                    <div fxLayout="column" fxLayoutAlign="space-evenly center">
                      <div>
                        {{data.staff && data.staff.firstName ? data.staff.firstName : ''}}
                      </div>
                      <div>
                        {{data.staff && data.staff.lastName ? data.staff.lastName : ''}}
                      </div>
                    </div>
                  </mat-grid-tile>
                  <mat-grid-tile class="makeBorder">
                    <div [ngClass]="{'disable-action': isCloseDateEnable(Sun_date)}"
                      (click)="AddingHoursToEmployee(data,data.schedule[0],Sun_date)">
                      <div *ngIf="data.schedule[0].schedule_shift.length != 0" class="not-pointer">
                        <div *ngFor="let sch of data.schedule[0].schedule_shift; let  i = index">
                          <div fxLayout="column">
                            <div fxLayout="row" fxLayoutAlign="space-between center">
                              <div *ngIf="i == 0">{{sch.time_start | date:'h:mm a'}} - </div>
                              <div *ngIf="i == 0"> {{sch.time_end | date:'h:mm a'}}</div>
                            </div>
                            <div fxLayout="row" fxLayoutAlign="space-between center">
                              <div *ngIf="i == 1">{{sch.time_start | date:'h:mm a'}} - </div>
                              <div *ngIf="i == 1"> {{sch.time_end | date:'h:mm a'}}</div>
                            </div>
                          </div>
                        </div>
                      </div>
                      <div class="container not-pointer" *ngIf="data.schedule[0].schedule_shift.length ==0">
                        <button class="btn"><span class="plusSign">+</span></button>
                      </div>
                    </div>
                  </mat-grid-tile>
                  <mat-grid-tile class="makeBorder">
                    <div [ngClass]="{'disable-action': isCloseDateEnable(Mon_date)}"
                      (click)="AddingHoursToEmployee(data,data.schedule[1],Mon_date)">
                      <div *ngIf=" data.schedule[1].schedule_shift.length != 0">
                        <div *ngFor="let sch of data.schedule[1].schedule_shift; let i=index">
                          <div fxLayout="column">
                            <div fxLayout="row" fxLayoutAlign="space-between center">
                              <div *ngIf="i == 0">{{sch.time_start | date:'h:mm a'}} - </div>
                              <div *ngIf="i == 0"> {{sch.time_end | date:'h:mm a'}}</div>
                            </div>
                            <div fxLayout="row" fxLayoutAlign="space-between center">
                              <div *ngIf="i == 1">{{sch.time_start | date:'h:mm a'}} - </div>
                              <div *ngIf="i == 1"> {{sch.time_end | date:'h:mm a'}}</div>
                            </div>
                          </div>
                        </div>
                      </div>
                      <div class="container not-pointer" *ngIf="data.schedule[1].schedule_shift.length == 0">
                        <button class="btn">
                          <span class="plusSign">+</span>
                        </button>
                      </div>
                    </div>
                  </mat-grid-tile>
                  <mat-grid-tile class="makeBorder">
                    <div [ngClass]="{'disable-action': isCloseDateEnable(Tue_date)}"
                      (click)="AddingHoursToEmployee(data,data.schedule[2],Tue_date)">
                      <div *ngIf=" data.schedule[2].schedule_shift.length != 0">
                        <div *ngFor="let sch of data.schedule[2].schedule_shift; let i = index">
                          <div fxLayout="column">
                            <div fxLayout="row" fxLayoutAlign="space-between center">
                              <div *ngIf="i == 0">{{sch.time_start | date:'h:mm a'}} - </div>
                              <div *ngIf="i == 0"> {{sch.time_end | date:'h:mm a'}}</div>
                            </div>
                            <div fxLayout="row" fxLayoutAlign="space-between center">
                              <div *ngIf="i == 1">{{sch.time_start | date:'h:mm a'}} - </div>
                              <div *ngIf="i == 1"> {{sch.time_end | date:'h:mm a'}}</div>
                            </div>
                          </div>
                        </div>
                      </div>
                      <div class="container not-pointer" *ngIf="data.schedule[2].schedule_shift.length == 0">
                        <button class="btn">
                          <span class="plusSign">+</span>
                        </button>
                      </div>
                    </div>
                  </mat-grid-tile>
                  <mat-grid-tile class="makeBorder">
                    <div [ngClass]="{'disable-action': isCloseDateEnable(Wed_date)}"
                      (click)="AddingHoursToEmployee(data,data.schedule[3],Wed_date)">
                      <div *ngIf="data.schedule[3].schedule_shift.length !=0">
                        <div *ngFor="let sch of data.schedule[3].schedule_shift; let i = index;">
                          <div fxLayout="column">
                            <div fxLayout="row" fxLayoutAlign="space-between center">
                              <div *ngIf="i == 0">{{sch.time_start | date:'h:mm a'}} - </div>
                              <div *ngIf="i == 0"> {{sch.time_end | date:'h:mm a'}}</div>
                            </div>
                            <div fxLayout="row" fxLayoutAlign="space-between center">
                              <div *ngIf="i == 1">{{sch.time_start | date:'h:mm a'}} - </div>
                              <div *ngIf="i == 1"> {{sch.time_end | date:'h:mm a'}}</div>
                            </div>
                          </div>
                        </div>
                      </div>
                      <div class="container not-pointer" *ngIf="data.schedule[3].schedule_shift.length==0">
                        <button class="btn">
                          <span class="plusSign">+</span>
                        </button>
                      </div>
                    </div>
                  </mat-grid-tile>
                  <mat-grid-tile class="makeBorder">
                    <div [ngClass]="{'disable-action': isCloseDateEnable(Thu_date)}"
                      (click)="AddingHoursToEmployee(data,data.schedule[4],Thu_date)">
                      <div *ngIf=" data.schedule[4].schedule_shift.length !=0">
                        <div *ngFor="let sch of data.schedule[4].schedule_shift; let i = index">
                          <div fxLayout="column">
                            <div fxLayout="row" fxLayoutAlign="space-between center">
                              <div *ngIf="i == 0">{{sch.time_start | date:'h:mm a'}} - </div>
                              <div *ngIf="i == 0"> {{sch.time_end | date:'h:mm a'}}</div>
                            </div>
                            <div fxLayout="row" fxLayoutAlign="space-between center">
                              <div *ngIf="i == 1">{{sch.time_start | date:'h:mm a'}} - </div>
                              <div *ngIf="i == 1"> {{sch.time_end | date:'h:mm a'}}</div>
                            </div>
                          </div>
                        </div>
                      </div>
                      <div class="container" *ngIf="data.schedule[4].schedule_shift.length ==0">
                        <button class="btn">
                          <span class="plusSign">+</span>
                        </button>
                      </div>
                    </div>
                  </mat-grid-tile>
                  <mat-grid-tile class="makeBorder">
                    <div [ngClass]="{'disable-action': isCloseDateEnable(Fri_date)}"
                      (click)="AddingHoursToEmployee(data,data.schedule[5],Fri_date)">
                      <div *ngIf=" data.schedule[5].schedule_shift.length !=0">
                        <div class="app-data" *ngFor="let sch of data.schedule[5].schedule_shift; let i = index">
                          <div fxLayout="column">
                            <div fxLayout="row" fxLayoutAlign="space-between center">
                              <div *ngIf="i == 0">{{sch.time_start | date:'h:mm a'}} - </div>
                              <div *ngIf="i == 0"> {{sch.time_end | date:'h:mm a'}}</div>
                            </div>
                            <div fxLayout="row" fxLayoutAlign="space-between center">
                              <div *ngIf="i == 1">{{sch.time_start | date:'h:mm a'}} - </div>
                              <div *ngIf="i == 1"> {{sch.time_end | date:'h:mm a'}}</div>
                            </div>
                          </div>
                        </div>
                      </div>
                      <div class="container not-pointer" *ngIf=" data.schedule[5].schedule_shift.length ==0">
                        <button class="btn">
                          <span class="plusSign">+</span>
                        </button>
                      </div>
                    </div>
                  </mat-grid-tile>
                  <mat-grid-tile class="makeBorder">
                    <div [ngClass]="{'disable-action': isCloseDateEnable(Sat_date)}"
                      (click)="AddingHoursToEmployee(data,data.schedule[6],Sat_date)">
                      <div *ngIf=" data.schedule[6].schedule_shift.length !=0">
                        <div *ngFor="let sch of data.schedule[6].schedule_shift; let i = index;">
                          <div fxLayout="column">
                            <div fxLayout="row" fxLayoutAlign="space-between center">
                              <div *ngIf="i == 0">{{sch.time_start | date:'h:mm a'}} - </div>
                              <div *ngIf="i == 0"> {{sch.time_end | date:'h:mm a'}}</div>
                            </div>
                            <div fxLayout="row" fxLayoutAlign="space-between center">
                              <div *ngIf="i == 1">{{sch.time_start | date:'h:mm a'}} - </div>
                              <div *ngIf="i == 1"> {{sch.time_end | date:'h:mm a'}}</div>
                            </div>
                          </div>
                        </div>
                      </div>
                      <div class="container not-pointer" *ngIf="data.schedule[6].schedule_shift.length == 0">
                        <button class="btn">
                          <span class="plusSign">+</span>
                        </button>
                      </div>
                    </div>
                  </mat-grid-tile>
                </mat-grid-list>
              </div>
            </div>
          </ng-container>
          <ng-container class="text-center py-3 p-4" *ngIf="work.length ==0">
            <div class="emptyicons">
              <mat-icon [inline]='true'>blur_off
              </mat-icon>
              <h1>{{'No Scheduled Staff' | translate}}</h1>
              <p>{{'Use the change location drop-down to get staff to respective location.' | translate}}</p>
            </div>
          </ng-container>
        </div>
      </div>
    </mat-tab>
    <mat-tab label="{{'CLOSED DATE' | translate}}">

      <div fxLayout="row" fxLayoutAlign="space-between center" fxLayout.xs="column" style="margin-top: 3% !important">
        <div fxLayout="column">
          <button *ngIf="staffList.length > 0" mat-raised-button class="newStaffButton"
            (click)="newClosedDate()">{{'New Closed Date' | translate}}</button>
        </div>
        <div fxLayout="column" fxFlex.xs="100" *ngIf="staffList.length > 0 && !!closedDateList.length">
          <div class="">
            <button mat-button [matMenuTriggerFor]="menu">{{'Export' | translate}}</button>
            <mat-menu #menu="matMenu">
              <button mat-menu-item value="CSV"
                (click)="onOptionSelected($event.currentTarget.value,'closeDate')">{{'CSV' | translate}}</button>
              <button mat-menu-item value="Excel"
                (click)="onOptionSelected($event.currentTarget.value,'closeDate')">{{'Excel'| translate}}</button>
              <button mat-menu-item value="Pdf"
                (click)="onOptionSelected($event.currentTarget.value,'closeDate')">{{'Pdf' | translate}}</button>
            </mat-menu>
          </div>
        </div>
      </div>
      <div *ngIf="staffList.length > 0 && !closedDateList.length">
        <div class="text-center py-3 p-4">
          <div class="emptyicons">
            <mat-icon [inline]='true'>calendar_today
            </mat-icon>
            <h1>{{'No Closed Dates' | translate}}</h1>
            <p>{{'List of the dates, your business is closed for public holidays'| translate}},
              <br>
              {{'maintenance or any other reason' | translate}}.
              {{'Clients will not be able to place online bookings during' | translate}}
              <br>
              {{'these days' | translate}}.</p>
          </div>
          <!-- <button class="button" (click)="addStaff()">New staff</button> -->
        </div>
      </div>
      <div *ngIf="staffList.length > 0 && !!closedDateList.length" style="margin-top: 3% !important" fxLayout="column"
        fxLayoutAlign="start stretch">
        <table mat-table [dataSource]="closedDateList" class="mat-elevation-z8">
          <ng-container matColumnDef="startDate" sticky>
            <th mat-header-cell *matHeaderCellDef> {{'Date Range' | translate}} </th>
            <td mat-cell *matCellDef="let element">
              {{element.startDate | date:'E, d MMM y'}}-{{element.endDate | date:'E, d MMM y'}} </td>
          </ng-container>

          <ng-container matColumnDef="days" sticky>
            <th mat-header-cell *matHeaderCellDef>{{'Days' | translate}}</th>
            <td mat-cell *matCellDef="let element"> {{(element.days)}} </td>
          </ng-container>

          <ng-container matColumnDef="locationName" sticky>
            <th mat-header-cell *matHeaderCellDef>{{'Location' | translate}}</th>
            <td mat-cell *matCellDef="let element"> {{element.locationName}} </td>
          </ng-container>

          <ng-container matColumnDef="description" sticky>
            <th mat-header-cell *matHeaderCellDef> {{'Description' | translate}} </th>
            <td mat-cell *matCellDef="let element"> {{element.description}} </td>
          </ng-container>
          <!-- id == element._id  -->
          <tr mat-header-row *matHeaderRowDef="closeDisplayColumn"></tr>
          <tr mat-row *matRowDef="let row; columns: closeDisplayColumn;let element"
            [ngClass]="( type == 'owner') ? 'cur' : 'cur2'" (click)="editCloseDate(row)"></tr>
        </table>
      </div>
      <div class="text-center py-3 p-4" *ngIf="staffList.length == 0">
        <div class="emptyicons">
          <mat-icon [inline]='true'>people
          </mat-icon>
          <h1>{{'No Staffs' | translate}}</h1>
          <p>{{'Add some staff for data to appear' | translate}}</p>
        </div>
        <button class="button" (click)="addStaff()">{{'New staff' | translate}}</button>
      </div>
      <!-- xxxxxxxxxx -->
    </mat-tab>
    <!--  -->
    <mat-tab label="{{'STAFF MEMBERS' | translate}}">
      <mat-tab-group mat-align-tabs="center" class="pt-6">
        <mat-tab label="ACTIVE">

          <div style="margin-top: 15px !important" fxLayout="row" *ngIf="staffList.length > 0"
            fxLayoutAlign="space-around center" fxLayout.xs="column">
            <div fxFlex="80">

            </div>
            <div fxLayout="column" fxFlex.xs="100" fxFlex="10">
              <div class="">
                <button mat-raised-button [matMenuTriggerFor]="menu" class="newStaffButton"
                  [disabled]="!staffList.length">{{'Export' | translate}}</button>
                <mat-menu #menu="matMenu">
                  <button mat-menu-item value="CSV"
                    (click)="onOptionSelected($event.currentTarget.value,'staff')">{{'CSV' | translate}}</button>
                  <button mat-menu-item value="Excel"
                    (click)="onOptionSelected($event.currentTarget.value,'staff')">{{'Excel' | translate}}</button>
                  <button mat-menu-item value="Pdf"
                    (click)="onOptionSelected($event.currentTarget.value,'staff')">{{'Pdf'|translate}}</button>
                </mat-menu>
              </div>
            </div>
            <div fxLayout="column" fxFlex="10" style="margin-right: 24px">
              <button *ngIf="staffList.length > 0" mat-raised-button class="newStaffButton"
                (click)="addStaff()">{{'New Staff'| translate}}</button>
            </div>
          </div>
          <div style="margin-top: 15px !important" *ngIf="staffList.length > 0" fxLayout="column"
            fxLayoutAlign="start stretch">
            <table mat-table [dataSource]="staffList" class="mat-elevation-z8">
              <ng-container matColumnDef="firstName" sticky>
                <th mat-header-cell *matHeaderCellDef> {{'First Name'| translate}} </th>
                <td mat-cell *matCellDef="let element"> {{element.firstName}} </td>
              </ng-container>
              <ng-container matColumnDef="lastName">
                <th mat-header-cell *matHeaderCellDef> {{'Last Name' | translate}} </th>
                <td mat-cell *matCellDef="let element"> {{element.lastName}} </td>
              </ng-container>style="top: 15px !important"
              <ng-container matColumnDef="email">
                <th mat-header-cell *matHeaderCellDef> {{'Email' | translate}} </th>
                <td mat-cell *matCellDef="let element"> {{element.email}} </td>
              </ng-container>
              <ng-container matColumnDef="notes">
                <th mat-header-cell *matHeaderCellDef> {{'Appointments' | translate}} </th>
                <td mat-cell *matCellDef="let element"> {{element.calendarBooking ? 'Calendar bookings enabled' : 'Calendar
              bookings disabled'}}</td>
              </ng-container>
              <ng-container matColumnDef="phone">
                <th mat-header-cell *matHeaderCellDef> {{'Phone Number' | translate}} </th>
                <td mat-cell *matCellDef="let element"> {{element.phone ? ((' ' +
              element.phone)) :
              ''}}
                </td>
              </ng-container>
              <ng-container matColumnDef="staffTitle" stickyEnd>
                <th mat-header-cell *matHeaderCellDef> {{'Staff Title' | translate}} </th>
                <td mat-cell *matCellDef="let element"> {{element?._type | titlecase}}
                  <!-- <mat-icon *ngIf="element._type == 'owner' ">person</mat-icon> -->
                  <!-- <mat-icon *ngIf="element._type == 'staff'  ">people</mat-icon> -->
                  <!-- <mat-icon *ngIf="element._type == 'staff' && element.employment.employmentType == 'permanant' ">people</mat-icon> -->
                  <!-- <mat-icon *ngIf="element._type == 'staff' && element.employment.employmentType == 'freelancer' ">group add</mat-icon>             -->
                </td>
              </ng-container>
              <ng-container matColumnDef="Reviews">
                <th mat-header-cell *matHeaderCellDef> {{'Reviews' | translate}} </th>
                <td mat-cell *matCellDef="let element " (click)="$event.stopPropagation()">

                  <button mat-raised-button class="reviews" [routerLink]="['/main/reviews',element._id]"
                    [disabled]="element.totalReview==0"> {{'Reviews' | translate}}({{element.totalReview}}) </button>
                </td>
              </ng-container>
              <ng-container matColumnDef="action">
                <th mat-header-cell *matHeaderCellDef> Active </th>
                <td mat-cell *matCellDef="let element " (click)="$event.stopPropagation()">
                  <mat-slide-toggle [checked]="element.active" (click)="deactivateStaff(element)">
                  </mat-slide-toggle>
                </td>
              </ng-container>
              <tr mat-header-row *matHeaderRowDef="staffListColumn"></tr>
              <tr mat-row *matRowDef="let row; columns: staffListColumn;let element"
                [ngClass]="(id == element._id || type == 'owner') ? 'cur' : 'cur2'" (click)="editStaffProfile(row)">
              </tr>
            </table>
          </div>
          <div class="text-center py-3 p-4" *ngIf="staffList.length == 0">
            <div class="emptyicons">
              <mat-icon [inline]='true'>people
              </mat-icon>
              <h1>{{'No Staffs' | translate}}</h1>
              <p>{{'Add some staff for data to appear' | translate}}</p>
            </div>
            <button class="button" (click)="addStaff()">{{'New staff' | translate}}</button>
          </div>

        </mat-tab>
        <mat-tab label="PAST">

          <div style="margin-top: 15px !important" fxLayout="row" *ngIf="pastStaffList.length > 0"
            fxLayoutAlign="space-around center" fxLayout.xs="column">
            <div fxFlex="80">

            </div>
            <div fxLayout="column" fxFlex.xs="100" fxFlex="10">
              <div class="">
                <button mat-raised-button [matMenuTriggerFor]="menu" class="newStaffButton"
                  [disabled]="!pastStaffList.length">{{'Export' | translate}}</button>
                <mat-menu #menu="matMenu">
                  <button mat-menu-item value="CSV"
                    (click)="onOptionSelected($event.currentTarget.value,'staff')">{{'CSV' | translate}}</button>
                  <button mat-menu-item value="Excel"
                    (click)="onOptionSelected($event.currentTarget.value,'staff')">{{'Excel' | translate}}</button>
                  <button mat-menu-item value="Pdf"
                    (click)="onOptionSelected($event.currentTarget.value,'staff')">{{'Pdf'|translate}}</button>
                </mat-menu>
              </div>
            </div>
            <!-- <div fxLayout="column" fxFlex="10" style="margin-right: 24px">
          <button *ngIf="pastStaffList.length > 0" mat-raised-button class="newStaffButton" (click)="addStaff()">{{'New Staff'| translate}}</button>
        </div> -->
          </div>
          <div style="margin-top: 15px !important" *ngIf="pastStaffList.length > 0" fxLayout="column"
            fxLayoutAlign="start stretch">
            <table mat-table [dataSource]="pastStaffList" class="mat-elevation-z8">
              <ng-container matColumnDef="firstName" sticky>
                <th mat-header-cell *matHeaderCellDef> {{'First Name'| translate}} </th>
                <td mat-cell *matCellDef="let element"> {{element.firstName}} </td>
              </ng-container>
              <ng-container matColumnDef="lastName">
                <th mat-header-cell *matHeaderCellDef> {{'Last Name' | translate}} </th>
                <td mat-cell *matCellDef="let element"> {{element.lastName}} </td>
              </ng-container>style="top: 15px !important"
              <ng-container matColumnDef="email">
                <th mat-header-cell *matHeaderCellDef> {{'Email' | translate}} </th>
                <td mat-cell *matCellDef="let element"> {{element.email}} </td>
              </ng-container>
              <ng-container matColumnDef="notes">
                <th mat-header-cell *matHeaderCellDef> {{'Appointments' | translate}} </th>
                <td mat-cell *matCellDef="let element"> {{element.calendarBooking ? 'Calendar bookings enabled' : 'Calendar
              bookings disabled'}}</td>
              </ng-container>
              <ng-container matColumnDef="phone">
                <th mat-header-cell *matHeaderCellDef> {{'Phone Number' | translate}} </th>
                <td mat-cell *matCellDef="let element"> {{element.phone ? ((' ' +
              element.phone)) :
              ''}}
                </td>
              </ng-container>
              <ng-container matColumnDef="staffTitle" stickyEnd>
                <th mat-header-cell *matHeaderCellDef> {{'Staff Title' | translate}} </th>
                <td mat-cell *matCellDef="let element"> {{element?._type | titlecase}}
                  <!-- <mat-icon *ngIf="element._type == 'owner' ">person</mat-icon> -->
                  <!-- <mat-icon *ngIf="element._type == 'staff'  ">people</mat-icon> -->
                  <!-- <mat-icon *ngIf="element._type == 'staff' && element.employment.employmentType == 'permanant' ">people</mat-icon> -->
                  <!-- <mat-icon *ngIf="element._type == 'staff' && element.employment.employmentType == 'freelancer' ">group add</mat-icon>             -->
                </td>
              </ng-container>
              <ng-container matColumnDef="Reviews">
                <th mat-header-cell *matHeaderCellDef> {{'Reviews' | translate}} </th>
                <td mat-cell *matCellDef="let element " (click)="$event.stopPropagation()">

                  <button mat-raised-button class="reviews" [routerLink]="['/main/reviews',element._id]"
                    [disabled]="element.totalReview==0"> {{'Reviews' | translate}} </button>
                </td>
              </ng-container>
              <ng-container matColumnDef="action" style="visibility: hidden;">
                <th mat-header-cell *matHeaderCellDef> Active </th>
                <td mat-cell *matCellDef="let element " (click)="$event.stopPropagation()">
                  <mat-slide-toggle [checked]="element.active" (click)="deactivateStaff(element._id)">
                  </mat-slide-toggle>
                </td>
              </ng-container>
              <tr mat-header-row *matHeaderRowDef="staffListColumn"></tr>
              <tr mat-row *matRowDef="let row; columns: staffListColumn;let element"
                [ngClass]="(id == element._id || type == 'owner') ? 'cur' : 'cur2'" (click)="editStaffProfile(row)">
              </tr>
            </table>
          </div>
          <div class="text-center py-3 p-4" *ngIf="pastStaffList.length == 0">
            <div class="emptyicons">
              <mat-icon [inline]='true'>people
              </mat-icon>
              <h1>{{'No Past Staffs' | translate}}</h1>
              <p>{{'Delete some staff for data to appear' | translate}}</p>
            </div>
            <!-- <button class="button" (click)="addStaff()">{{'New staff' | translate}}</button> -->
          </div>


        </mat-tab>
      </mat-tab-group>
      <!-- xxxxxxxxxx -->
    </mat-tab>
    <!--  -->
    <mat-tab label="{{'SALARY' | translate}}">
      <div fxLayout="row" fxLayoutAlign="end center" class="p-8">
        <div fxLayout="column" fxFlex="60" style=" margin-right: 24px">
          <mat-form-field class="noline hello" [floatLabel]="'never'" style="width: 230px;">
            <input class="dropdown" autocomplete="off" matInput placeholder="&nbsp; &nbsp;   Select Date range"
              [(ngModel)]="saleDateTimeRange" [selectMode]="'range'" [owlDateTimeTrigger]="dtRange2"
              [owlDateTime]="dtRange2" (ngModelChange)="salaryinputDateRange($event)">
            <owl-date-time style="widows: 80px !important" [pickerType]="'calendar'" #dtRange2>
            </owl-date-time>
          </mat-form-field>
        </div>
        <div fxLayout="column" fxFlex="20" style="margin-right: 24px">
          <mat-form-field>
            <input matInput (keyup)="applyFilter($event.target.value)" autocomplete="off" placeholder="Filter">
          </mat-form-field>
        </div>
        <div fxLayout="column" fxFlex="20" style="margin-right: 24px">
          <mat-form-field>
            <mat-label>Select Employee Type</mat-label>
            <mat-select [(value)]="selected">
              <mat-option>None</mat-option>
              <mat-option value="Freenlance Employee">Freelancer Employee</mat-option>
              <mat-option vlaue="Direct Employee">Direct Employee</mat-option>
            </mat-select>
          </mat-form-field>
        </div>
      </div>
      <div class="filters" *ngIf="type =='staff' &&  staffComm && staffComm.income.length > 0" fxLayout="column"
        fxLayoutAlign="start stretch">
        <table mat-table [dataSource]="staffComm.income" class="mat-elevation-z8">
          <ng-container matColumnDef="booking_reference">
            <th mat-header-cell *matHeaderCellDef> Booking reference ID
            </th>
            <td mat-cell *matCellDef="let element"> {{element.booking_reference}} </td>
            <td mat-footer-cell *matFooterCellDef> {{'Total' | translate}} </td>
          </ng-container>
          <ng-container matColumnDef="commission_amount">
            <th mat-header-cell *matHeaderCellDef> {{'Commission amount' | translate}} </th>
            <td mat-cell *matCellDef="let element">
              {{element.commission_amount | currency:currencyCode : 'symbol-narrow'}} </td>
            <td mat-footer-cell *matFooterCellDef> {{totalComm | currency:currencyCode : 'symbol-narrow'}} </td>
          </ng-container>
          <ng-container matColumnDef="sales_amount">
            <th mat-header-cell *matHeaderCellDef> {{'Sales amount' | translate}} </th>
            <td mat-cell *matCellDef="let element"> {{element.sales_amount | currency:currencyCode : 'symbol-narrow'}}
            </td>
            <td mat-footer-cell *matFooterCellDef> {{totalSale | currency:currencyCode : 'symbol-narrow'}} </td>
          </ng-container>
          <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
          <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
          <tr mat-footer-row *matFooterRowDef="displayedColumns"></tr>
        </table>
      </div>
      <div class="filters pt-4" *ngIf="type =='owner'" fxLayout="column" fxLayoutAlign="start stretch">
        <table mat-table [dataSource]="commissionList" class="mat-elevation-z8 salaryTable">
          <ng-container matColumnDef="staffName">
            <th mat-header-cell *matHeaderCellDef> {{'Staff name' | translate}}
            </th>
            <td mat-cell *matCellDef="let element"> {{element.staff.firstName}} </td>
          </ng-container>
          <ng-container matColumnDef="commissionAmt">
            <th mat-header-cell *matHeaderCellDef> {{'Commission amount' | translate}}
            </th>
            <td mat-cell *matCellDef="let element">
              {{element.totalCommission | currency:currencyCode : 'symbol-narrow'}} </td>
          </ng-container>
          <ng-container matColumnDef="salesAmt">
            <th mat-header-cell *matHeaderCellDef> {{'Sales amount' | translate}}
            </th>
            <td mat-cell *matCellDef="let element"> {{element.totalSales | currency:currencyCode : 'symbol-narrow'}}
            </td>
          </ng-container>
          <ng-container matColumnDef="action">
            <th mat-header-cell *matHeaderCellDef>Action</th>
            <td mat-cell *matCellDef="let element" (click)="$event.stopPropagation()">
              
                <mat-icon  (click)="confirmSalary(element)">info</mat-icon>
              
            </td>
          </ng-container>
          <tr mat-header-row *matHeaderRowDef="ownerDisplayedColumns"></tr>
          <tr mat-row *matRowDef="let row; columns: ownerDisplayedColumns;" (click)="staffSalary(row)"></tr>
        </table>
        <div fxLayout="row" fxLayoutAlign="center center" style="padding-top: 13px;" *ngIf="commissionList.length == 0">
          <ng-container class="text-center py-3 p-2">
            <div class="emptyicons">
              <mat-icon [inline]='true'>search
              </mat-icon>
              <h1>{{'No Record Found' | translate}}</h1>
              <p>{{'Try using different filter options to find what you are looking for' | translate}}.</p>
            </div>
          </ng-container>
        </div>
      </div>
      <div class="text-center py-3 p-4" *ngIf="staffComm && staffComm.income.length == 0">
        <div class="emptyicons">
          <mat-icon [inline]='true'>attach_money
          </mat-icon>
          <h1>{{'No sales history'| translate}}</h1>
          <p>Checkout any appointment for this staff for salary data to appear</p>
        </div>
      </div>
    </mat-tab>
    <mat-tab label="{{'REVIEWS' | translate}}">
      <app-staff-reviews></app-staff-reviews>
      <!-- <div fxLayout="row" fxLayoutAlign="space-around center" fxLayoutGap="5px" fxLayoutGap.xs="1" fxLayout.xs="column">
        <div fxLayout="column" class="float-right" fxFlex="30">
          <mat-form-field class="noline" >
            <mat-select class="dropdown" [(ngModel)]="selectedReviewLoc"
              (selectionChange)="locSelectedListenerReview($event.value)">
              <mat-option *ngFor="let item of locList" [value]="item._id">
                {{item.name}}
              </mat-option>
            </mat-select>
          </mat-form-field>
        </div>
        <div fxLayout="column" fxFlex="70">

        </div>
      </div>
      
      <div  *ngIf="!reviewList.length" >
        <div class="text-center py-3 p-4">
          <div class="emptyicons">
            <mat-icon [inline]='true'>rate_review
            </mat-icon>
            <h1>{{'No review found' | translate}}</h1>
            <p>{{'At present there are no reviews, ask customers to provide' | translate}} 
              <br>
              {{'good feedback and reviews, and all those reviews will' | translate}} 
              <br>
               {{'be present here.' | translate}}</p>
          </div>
        </div>
      </div>
      <br>
      <br>
      <div class="filters" *ngIf="reviewList.length" fxLayout="column" fxLayoutAlign="start stretch">

        <table mat-table [dataSource]="reviewList" class="mat-elevation-z8">

          <ng-container matColumnDef="name">
            <th mat-header-cell *matHeaderCellDef>{{'Customer Name' | translate}} </th>
            <td mat-cell *matCellDef="let element"> {{element.customerId.userName}} </td>
          </ng-container>

          <ng-container matColumnDef="review">
            <th mat-header-cell *matHeaderCellDef> {{'Reviews' | translate}} </th>
            <td mat-cell *matCellDef="let element"> {{element.review}} </td>
          </ng-container> -->

      <!-- 
          <ng-container matColumnDef="communication_star">
            <th mat-header-cell *matHeaderCellDef> Communication Stars </th>
            <td mat-cell *matCellDef="let element"> {{element.communication_star}} </td>
          </ng-container>


          <ng-container matColumnDef="massage_star">
            <th mat-header-cell *matHeaderCellDef> Massage Stars </th>
            <td mat-cell *matCellDef="let element"> {{element.massage_star}} </td>
          </ng-container> -->

      <!-- <ng-container matColumnDef="star">
            <th mat-header-cell *matHeaderCellDef> {{'Stars' | translate}} </th>
            <td mat-cell *matCellDef="let element"> {{element.star}} </td>
          </ng-container> -->

      <!-- <ng-container matColumnDef="ratedto">
            <th mat-header-cell *matHeaderCellDef> Rated To </th>
            <td mat-cell *matCellDef="let element"> {{element.ratedTo}} </td>
          </ng-container> -->


      <!-- <tr mat-header-row *matHeaderRowDef="reviewRow"></tr>
          <tr mat-row *matRowDef="let row; columns: reviewRow;"></tr> -->
      <!-- </table>
      </div> -->

    </mat-tab>

    <mat-tab label="{{'HIRING' | translate }}">
      <div *ngIf="!createAJobClicked">
        <div  [@enter] class="button-div" (click)="newJob()" *ngIf="isCreateJobButton">
          <p>Create a job +</p>
        </div>
        <br>
        <br>
        <mat-tab-group class="mat-group" (selectedTabChange)="hiringTabChange($event)">
          <mat-tab label="MY JOB">
            <!-- fxLayout="row" fxLayoutAlign="space-evenly center" -->
            <div *ngIf="!showJobs" fxLayout="row wrap" fxLayoutGap="32px" fxLayoutAlign="flex-start">
              <ng-container *ngFor="let job of jobsListView">
                <mat-card fxFlex="0 1 calc(44.3% - 32px)" class="cardStyle" (click)="navigateToJob(job)">
                  <div fxLayout="column" fxLayoutAlign="space-around stretch">
                    <div>
                      <div fxLayout="row" fxLayoutAlign="start center">
                        <div fxFlex="12">
                          <mat-icon class="colorRed">
                            radio_button_checked
                          </mat-icon>
                        </div>
                        <div fxFlex="31">
                          <h2>{{job?.jobTitle | titlecase}}</h2>
                          <h4 class="margin0">at {{job?.locationDetails?.name | titlecase}}</h4>
                        </div>
                      </div>
                    </div>
                    <div>
                      <div fxLayout="row" fxLayoutAlign="space-around center">
                        <div fxFlex="5">
                          <mat-icon>location_on</mat-icon>
                        </div>
                        <div fxFlex="45">
                          <h6 class="margin0"> {{job?.locationDetails?.street}},{{job?.locationDetails?.city}}</h6>
                        </div>
                        <div fxFlex="30"></div>
                        <div fxFlex="20">
                          <button mat-button color="warn" (click)="deleteJob(job)">Delete</button>
                        </div>
                      </div>
                    </div>
                  </div>
                </mat-card>
              </ng-container>
              <div *ngIf="!jobsListView.length" class="padd-left">
                <div class="text-center py-3 p-4">
                  <div class="emptyicons">
                    <mat-icon [inline]='true'>work_off
                    </mat-icon>
                    <h1>No Jobs Found</h1>
                    <p>All the jobs created will appear here.</p>
                  </div>
                </div>
              </div>
            </div>
            <!-- show Job list -->
            <div *ngIf="showJobs">
              <app-appliedjobs (backNavigate)="backNavigate($event)" [jobData]="jobData"></app-appliedjobs>
            </div>
          </mat-tab>
          <mat-tab label="MY FREELANCERS">
            <app-applied-freelancers></app-applied-freelancers>
          </mat-tab>

        </mat-tab-group>
      </div>
      <div *ngIf="createAJobClicked">
        <button mat-button>
          <mat-icon class="size-33" [inline]='true' (click)="backClick()">arrow_back</mat-icon>
        </button>


        <!-- <div class="floatR pad-right">
          <mat-label class="labelText">Select Location</mat-label>
          <mat-form-field class="noline">
            <mat-select class="dropdown1" [(ngModel)]="selectedLoc"
              (selectionChange)="locSelectedListener($event.value)" multiple>
              <mat-option *ngFor="let item of locList" [value]="item._id">
                {{item.name}}
              </mat-option>
            </mat-select>
          </mat-form-field>
        </div> -->
        <div class="pad-top-left">

          <div fxLayout="column" fxLayoutAlign="start" fxLayout.gt-sm="row" fxLayoutAlign.gt-sm="start start">
            <div class="widget" fxFlex="100" fxFlex.gt-sm="50" (click)="newJobModal()">
              <div class="fuse-card auto-width mb-32 marginClass" [ngClass.gt-sm]="'mb-0 mr-32 '">
                <div class="p-16 pb-15" fxLayout="row wrap" fxLayoutAlign="start end">
                  <div fxLayout="column" style="width: 100% !important;" fxLayoutAlign="space-around center">
                    <div class="h3">CREATE NEW JOB
                    </div>
                    <div class="pr-36per">
                      <mat-icon class="iconSize">work</mat-icon>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <!-- !! -->
            <div class="widget" fxFlex="100" fxFlex.gt-sm="50" (click)="copyPreviousJob()" [ngStyle]="{'pointer-events': jobsListView.length == 0 ? 'none' : 'all'}">
              <div class="fuse-card auto-width mb-32 marginClass" [ngClass.gt-sm]="'mb-0 mr-32 '" [ngStyle]="{'background-color': jobsListView.length == 0 ? 'lightgrey' : 'white'}">
                <div class="p-16 pb-15" fxLayout="row wrap" fxLayoutAlign="start end">
                  <div fxLayout="column" style="width: 100% !important;" fxLayoutAlign="space-around center">
                    <div class="h3">
                      COPY FROM PREVIOUS JOB
                    </div>
                    <div class="pr-36per">
                      <mat-icon class="iconSize">business_center</mat-icon>
                    </div>
                    <div *ngIf="showJobDropDown" [@enter]>
                      <mat-label>Select job</mat-label>
                      <mat-form-field class="noline">
                        <mat-select class="dropdown1" (selectionChange)="openCreateJob($event)">
                          <mat-option *ngFor="let job of jobsListView" [value]="job">
                            {{job?.jobTitle | titlecase}}
                          </mat-option>
                        </mat-select>
                      </mat-form-field>
                    </div>
                  </div>
                </div>
              </div>
            </div>

            <!-- TODO -->
          </div>
          <!-- <div >
            <div>

            </div>
            <mat-icon class="iconSize">business_center</mat-icon>
          </div> -->

          <!-- <mat-radio-button (click)="newJobModal()">Create a new job</mat-radio-button> -->

          <!-- <mat-radio-button (click)="copyPreviousJob()">
            Copy From Previous Job
          </mat-radio-button> -->

          <!-- <mat-form-field class="noline" *ngIf="showJobDropDown" [@enter]>
            <mat-select class="dropdown1"  (selectionChange)="openCreateJob($event)">
              <mat-option  *ngFor="let job of jobsListView"  [value]="job">
                {{job?.jobTitle | titlecase}}
              </mat-option>
            </mat-select>
          </mat-form-field> -->
        </div>
      </div>
    </mat-tab>
    <mat-tab label="{{'ATTENDANCE' | translate}}">

    </mat-tab>
  </mat-tab-group>
</div>