<div class="page-layout blank">
  <!-- <p-toast></p-toast> -->
  <form [formGroup]="productForm" (ngSubmit)="onSubmitProduct(productForm)">
    <div *ngIf="pageView=='normal'">
      <div fxLayout="column" class="header" fxLayoutAlign="start center">
        <div fxLayout="row">
          <h2 mat-dialog-title>Create Product</h2>
          <button mat-button mat-dialog-close class="crossButton">
            <mat-icon class="crossButton" mat-dialog-close>close</mat-icon>
          </button>
        </div>
      </div>
      <mat-dialog-content class="content" style="border-top: 1px solid #dee3e6;">
        <div fxLayout="row" class="innerbody" fxLayoutAlign="space-around">
          <div class="left" fxLayout="column" fxFlex="50">
            <div fxLayout="row">
              <div fxLayout="column" fxFlex="100">
                <mat-form-field appearance="outline">
                  <mat-label>PRODUCT NAME</mat-label>
                  <input matInput placeholder="" formControlName="name">
                  <mat-error *ngIf="
                  !productForm.controls['name'].valid &&
                  (productForm.controls['name'].touched ||
                    submittedError)
                ">
                <mat-error *ngIf="
                    productForm.get('name').hasError('required')
                  ">
                  Product name is required
                </mat-error>
              </mat-error>
            </mat-form-field>                
              </div>
            </div>
            <div fxLayout="row">
              <div fxLayout="column" fxFlex="100">
                <mat-form-field class="  example-full-width" appearance="outline">
                  <mat-label class="">Select Category</mat-label>
                  <mat-select  formControlName="category"  >
                    <mat-option *ngFor="let category of categoryData" [value]="category.id">
                      {{category.name}}
                    </mat-option>
                  </mat-select>
                </mat-form-field>
              </div>
            </div>
            <div fxLayout="row">
              <div fxLayout="column" fxFlex="100">
                <mat-form-field class="  example-full-width" appearance="outline">
                  <mat-label class="">Select Brand</mat-label>
                  <mat-select  formControlName="brand"  >
                    <mat-option *ngFor="let brand of brandData" [value]="brand._id">
                      {{brand.name}}
                    </mat-option>
                  </mat-select>
                </mat-form-field>
              </div>
            </div>

            <div fxLayout="row" style="padding-bottom:10px">
              <div fxLayout="column" fxFlex="100">
                <div class="terms" fxLayout="row" fxLayoutAlign="space-between center">
                  <div fxLayout="column" fxFlex="50">
                    Enable Retail Sales </div>
                  <div fxLayout="column" fxFlex="50">
                    <mat-slide-toggle></mat-slide-toggle>
                  </div>
                </div>
              </div>
            </div>

            <div fxLayout="row" fxLayoutGap="30px">
              <div fxLayout="column" fxFlex="50">
                <mat-form-field appearance="outline">
                  <mat-label>RETAIL PRICE</mat-label>
                  <input matInput myNumberOnly type="text" placeholder="" formControlName="retailPrice">
                  <mat-error *ngIf="
                  !productForm.controls['retailPrice'].valid &&
                  (productForm.controls['retailPrice'].touched ||
                    submittedError)
                ">
                <mat-error *ngIf="
                    productForm.get('retailPrice').hasError('required')
                  ">
                  Retail price is required
                </mat-error>
              </mat-error>
                </mat-form-field>
              </div>
              <div fxLayout="column" fxFlex="50">
                <mat-form-field appearance="outline">
                  <mat-label>SPECIAL PRICE</mat-label>
                  <input matInput myNumberOnly type="text" placeholder="" formControlName="specialPrice">
                </mat-form-field>
              </div>
            </div>
            <div fxLayout="row">
              <div fxLayout="column" fxFlex="100">
                <mat-form-field appearance="outline">
                  <mat-label>TAX</mat-label>
                  <input matInput placeholder="" formControlName="beforeTax">
                  <button mat-button matSuffix (click)="taxModalView()">
                    <mat-icon matSuffix>note_add</mat-icon>
                  </button>
                </mat-form-field>
              </div>
            </div>
            <div fxLayout="row">
              <div fxLayout="column" fxFlex="100">
                <div class="terms" fxLayout="row" fxLayoutAlign="start start">
                  <mat-checkbox formControlName="acceptNotify" name="terms" aria-label="I read and accept" required>
                    <span>Accept marketing notification</span>
                  </mat-checkbox>
                </div>
              </div>
            </div>
          </div>
          <!-- xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx -->
          <!-- phase right -->
          <div class="right" fxLayout="column" fxFlex="50">
            <div fxLayout="row" fxLayoutGap="30px">
              <div fxLayout="column" fxFlex="50">
                <mat-form-field appearance="outline">
                  <mat-label>BARCODE</mat-label>
                  <input matInput myNumberOnly type="text" placeholder="" formControlName="barcode">
                </mat-form-field>
              </div>
              <div fxLayout="column" fxFlex="50">
                <mat-form-field appearance="outline">
                  <mat-label>SKU</mat-label>
                  <input matInput myNumberOnly type="text" placeholder="" formControlName="sku">
                </mat-form-field>
              </div>
            </div>
            <div fxLayout="row">
              <div fxLayout="column" fxFlex="100">
                <mat-form-field appearance="outline">
                  <mat-label>DESCRIPTION</mat-label>
                  <textarea matInput placeholder="" formControlName="description"></textarea>
                </mat-form-field>
              </div>
            </div>
            <div fxLayout="row" style="padding-bottom:10px">
              <div fxLayout="column" fxFlex="100">
                <div class="terms" fxLayout="row" fxLayoutAlign="space-between center">
                  <div fxLayout="column" fxFlex="50">
                    Enable Stock Control </div>
                  <div fxLayout="column" fxFlex="50">
                    <mat-slide-toggle></mat-slide-toggle>
                  </div>
                </div>
              </div>
            </div>
            <div fxLayout="row">
              <div fxLayout="column" fxFlex="100">
                <mat-form-field appearance="outline">
                  <mat-label>SUPPLY PRICE</mat-label>
                  <input matInput placeholder="" formControlName="supplyPrice">
                </mat-form-field>
              </div>
            </div>
            <div fxLayout="row">
              <div fxLayout="column" fxFlex="100">
                <mat-form-field class="  example-full-width" appearance="outline">
                  <mat-label class="">Select Supplier</mat-label>
                  <mat-select  formControlName="supplier"  >
                    <mat-option *ngFor="let supplier of supplierData" [value]="supplier._id">
                      {{supplier.name}}
                    </mat-option>
                  </mat-select>
                </mat-form-field>
              </div>
            </div>
            <div fxLayout="row">
              <div fxLayout="column" fxFlex="100">
                <mat-card>
                  <div class="wrapper">
                    <div class="table">
                      <div class="row header blue headers">
                        <div class="cell">
                          Location
                        </div>
                        <div class="cell">
                          Initial stock
                        </div>
                        <div class="cell">
                          Reorder point
                        </div>
                        <div class="cell">
                          Reorder qty.
                        </div>
                      </div>
                      <div class="row rowfill" *ngFor="let item of location">
                        <div class="cell" style="font-size:14px">
                          {{item.name}}
                        </div>
                        <div class="cell">
                          <mat-form-field style="font-size: 12px; width:50px !important " appearance="outline">
                            <input matInput placeholder="">
                          </mat-form-field>
                        </div>
                        <div class="cell">
                          <mat-form-field style="font-size: 12px; width:50px !important " appearance="outline">
                            <input matInput placeholder="">
                          </mat-form-field>
                        </div>
                        <div class="cell" data-title="Active">
                          <mat-form-field style="font-size: 12px; width:50px !important " appearance="outline">
                            <input matInput placeholder="">
                          </mat-form-field>
                        </div>
                      </div>
                    </div>
                  </div>
                </mat-card>
              </div>
            </div>
          </div>
        </div>
      </mat-dialog-content>
      <div style="border-top: 1px solid #dee3e6;" fxLayout="row" fxLayoutAlign="space-between center" class="buttons">
        <button mat-raised-button color="warn" type="button" (click)="isDelete()">Delete</button>
        <div fxLayout="row" fxFlex="1 1 auto"></div>
        <button mat-raised-button type="button" mat-dialog-close>Cancel</button>
        <button style="margin-left: 10px !important;" mat-raised-button type="submit" color="primary"
          >Saves</button>
      </div>
    </div>
    <!--  -->
    <!--  -->
    <div *ngIf="pageView == 'tax'">
      <div fxLayout="column" class="header" fxLayoutAlign="start center">
        <div fxLayout="row">
          <h2 mat-dialog-title>Change Tax</h2>
        </div>
      </div>
      <mat-dialog-content class="content">
        <div fxLayout="row" fxLayoutAlign="space-around center">
          <p class="description">
            Choose Tax Rate applicable in locations.
          </p>
        </div>
        <div fxLayout="column" fxLayoutAlign="space-between center">
          <div formArrayName="tax" *ngFor="let item of productForm.get('tax').controls; let i = index;">
            <div [formGroupName]="i">
              <div fxLayout="row" fxLayoutAlign="space-between center">
                <input formControlName="locationName" placeholder="location name">
              </div>
              <div fxLayout="row" fxLayoutAlign="space-between center">
                <mat-form-field class="noline" fxFlex="100">
                  <mat-select formControlName="value" class="dropdown" placeholder="select the option">
                    <mat-option value="">Default</mat-option>
                    <mat-option value="No Tax">No Tax</mat-option>
                    <mat-option value="10">12</mat-option>
                  </mat-select>
                </mat-form-field>
              </div>
            </div>
          </div>
        </div>
      </mat-dialog-content>
      <div fxLayout="row" fxLayoutAlign="space-around center" class="buttons">
        <div fxLayout="column" fxLayoutAlign="space-around stretch" fxFlex="100">
          <button mat-raised-button color="primary" type="button">Save</button>
        </div>
      </div>
    </div>
  </form>
</div>